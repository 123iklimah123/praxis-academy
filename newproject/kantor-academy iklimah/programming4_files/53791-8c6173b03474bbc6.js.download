"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53791],{53791:function(e,t,i){i.d(t,{VL:function(){return Q}});var n=i(85893),o=i(5152),r=i.n(o),s=i(45697),a=i.n(s),c=i(67294),l=i(91955),u=i(89908),d=i(45170),p=i(18258),f=i(75532),g=i(39348),v=i(47568),m=i(14924),C=i(26042),h=i(34051),T=i.n(h),y=i(40821),S=i(10123),I=i(49196),A=i(56658),w=i(23367),P=i(12558),k=i(257),b=i(84074),x=i(25996),q=i(37812),D=i(93271),O=i(88540),R=i(73929),_=i(41587),Z=i(73856),M=i(82983),U=function(e){var t=e.queryParams;return(0,S.nS)({queryParams:t}).formattedUrl},E=function(e){var t=e.assetId,i=e.asset,n=i.id,o=i.tier,r=void 0===o?10:o,s=i.src,a=i.aspect,c=i.width,l=i.height;return{metadata:{notes:{media_id:t,alpha_num_id:n,rex_id:n,media_type:A.gP,tier:r,media:{aspect:a,width:c,height:l,url:s}}}}},B=function(){var e=(0,v.Z)(T().mark((function e(t){var i,n,o,r,s,a,c,l,u,p,f,g,v;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.isRexEditorial,n=t.collectionId,o=t.verificationCode,r=t.setAsCover,s=t.firstAsset,a=t.collectionType,(l=(0,d.A8)(s))===A.VT){e.next=5;break}return e.abrupt("return");case 5:return u={id:n,verificationCode:o,collectionType:a},p=(0,S.Yz)({queryParams:u}).formattedUrl,e.next=9,_.uS.get(p).then((function(e){return(0,Z.O)(e.data)||{}}));case 9:if(null===(f=e.sent)||void 0===f||null===(c=f.coverItem)||void 0===c?void 0:c.id){e.next=15;break}return g=(0,d.OP)({asset:s,isRexEditorial:i}),v=(0,x.Q)({collectionId:n,mappedAssetType:l,assetId:g}),e.next=15,r({collection:{id:n},mediaItem:{id:v}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=i(90781),N=i(76393),V=i(700),j=i(99534),G=r()((function(){return Promise.all([i.e(20565),i.e(41664),i.e(11514),i.e(16694),i.e(11243),i.e(69937),i.e(29984),i.e(37998),i.e(28174)]).then(i.bind(i,35032)).then((function(e){return e.CollectionModal}))}),{loadableGenerated:{webpack:function(){return[35032]}},ssr:!1}),L=function(e){var t=e.isOpen,i=(0,j.Z)(e,["isOpen"]);return(0,g.B)(t)&&(0,n.jsx)(G,(0,C.Z)({isOpen:t},i))},H=r()((function(){return i.e(9257).then(i.bind(i,9257)).then((function(e){return e.LazyAddToCollectionModal}))}),{loadableGenerated:{webpack:function(){return[9257]}},ssr:!1}),F=r()((function(){return i.e(1884).then(i.bind(i,1884)).then((function(e){return e.Snackbar}))}),{loadableGenerated:{webpack:function(){return[1884]}},ssr:!1}),z=function(e){var t=e.assets,i=e.assetType,o=e.collectionId,r=e.collectionTitle,s=e.gridItems,a=e.isDialogActive,u=e.isSnackBarOpen,d=e.onAddToCollections,p=e.onAlertSnackbarClose,f=e.onAddToCollectionsComplete,v=e.redirectToCDPAction,m=e.setIsDialogActive,C=e.showCopyToModalTitle,h=e.status,T=e.verificationCode,y=e.pageSection,S=(0,N.p)(l.vb),I=(0,N.p)(l.pG),A=(0,g.B)(t),w=(0,c.useCallback)((function(){return m(!1)}),[m]);return A?S||I?(0,n.jsx)(H,{onClose:w,isOpen:a,items:t,onAddToCollectionsComplete:f,pageSection:y}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L,{assets:t,assetType:i,collectionId:o,gridItems:s,isOpen:a,onAddToCollections:d,setIsDialogActive:m,showCopyToModalTitle:C,pageSection:y}),(0,n.jsx)(F,{assetType:i,collectionId:o,collectionTitle:r,isOpen:u,onAlertSnackbarClose:p,redirectToCDPAction:v,status:h,verificationCode:T})]}):null};z.propTypes={assets:a().arrayOf(a().shape({})),assetType:a().string,collectionId:a().string.isRequired,collectionTitle:a().string.isRequired,gridItems:a().arrayOf(a().shape({image:a().shape(V.R)})),isDialogActive:a().bool.isRequired,onAddToCollections:a().func.isRequired,onAlertSnackbarClose:a().func.isRequired,onAddToCollectionsComplete:a().func,redirectToCDPAction:a().shape({shouldHandleRedirect:a().bool,redirectToCollectionDetailsPage:a().func}),setIsDialogActive:a().func.isRequired,showCopyToModalTitle:a().bool.isRequired,status:a().shape({}).isRequired,verificationCode:a().string.isRequired},z.defaultProps={assetType:"",assets:null,gridItems:null,onAddToCollectionsComplete:void 0,redirectToCDPAction:{}};var Q=function(e){var t=e.initialAssetType,i=(0,c.useState)(!1),n=i[0],o=i[1],r=(0,c.useState)(!1),s=r[0],a=r[1],l=(0,c.useState)(!1),g=l[0],h=l[1],Z=(0,c.useState)(""),N=Z[0],V=Z[1],j=(0,c.useState)(null),G=j[0],L=j[1],H=(0,c.useState)(t),F=H[0],Q=H[1],W=(0,c.useState)(null),X=W[0],Y=W[1],K=(0,c.useState)(null),$=K[0],ee=K[1],te=(0,c.useState)(null),ie=te[0],ne=te[1],oe=(0,J.B)(),re=(0,p.cM)(),se=(0,f.L)(),ae=(0,c.useState)({shouldHandleRedirect:!1,redirectToCollectionDetailsPage:se}),ce=ae[0],le=ae[1],ue=function(){var e=(0,c.useState)({status:"",error:void 0}),t=e[0],i=e[1],n=(0,c.useState)(""),o=n[0],r=n[1],s=(0,c.useState)(""),a=s[0],l=s[1],u=(0,D.J)(),p=(0,M.w)().setAsCover,f=(0,O.D)().isBrandSstk,g=(0,R.yh)().analytics,h=(0,k.UM)(g),Z=(0,c.useCallback)(function(){var e=(0,v.Z)(T().mark((function e(t){var n,o,s,a,c,g,v,k,D,O,R,Z,M,J,N,V,j,G,L,H,F,z,Q,W,X;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.assets,o=t.assetType,s=t.gridItems,a=t.groupedOptions,c=t.id,g=t.title,v=t.verificationCode,k=t.pageSection,D=t.listId,O=(0,b.wZ)({assetType:o,isBrandSstk:f}),e.prev=2,i({status:I.MR,error:void 0}),R=(0,d.Xo)(o),Z=c,M=v,a&&a.length&&(J=a.find((function(e){return e.title===g})),J&&(Z=J.id,M=J.verificationCode)),Z){e.next=20;break}return N=(0,S.A6)().formattedUrl,V={data:{attributes:{title:g,collectionType:O,isPublic:!1},type:w.Ul}},e.next=13,_.uS.post(N,V);case 13:j=e.sent,G=j.data,L=G.id,H=G.attributes,F=H.verificationCode,Z=L,M=F;case 20:return z={data:n.map((function(e){var t=(0,d.OP)({asset:e,isRexEditorial:R}),i=(0,d.A8)(e);return(0,C.Z)({type:w.A8,id:(0,x.Q)({collectionId:Z,mappedAssetType:i,assetId:t})},i===A.VT&&E({assetId:t,asset:e}))}))},Q=(0,S.mp)({urlParams:{id:Z},queryParams:{isRexEditorial:R}}).formattedUrl,W=(0,q.y)(h),e.next=25,_.uS.post(Q,z,W?{headers:(0,m.Z)({},P.as,W)}:void 0);case 25:return X=n[0],e.next=28,B({isRexEditorial:R,collectionId:Z,verificationCode:M,setAsCover:p,firstAsset:X,collectionType:O});case 28:u({collectionId:Z,collectionName:g,gridItems:s,assets:n,pageSection:k,listId:D}),r(Z),l(M),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(2),i({status:I.cM,error:e.t0});case 36:return e.prev=36,e.next=39,(0,y.JG)(U({queryParams:{"filter[type]":O}}));case 39:return e.finish(36);case 40:case"end":return e.stop()}}),e,null,[[2,33,36,40]])})));return function(t){return e.apply(this,arguments)}}(),[u,p,h,f]);return{add:Z,collectionId:o,setStatus:i,status:t,verificationCode:a}}(),de=ue.add,pe=ue.status,fe=ue.collectionId,ge=ue.verificationCode;(0,c.useEffect)((function(){return function(){return L(null)}}),[]),(0,c.useEffect)((function(){return function(){return Q("")}}),[]);var ve=(0,c.useCallback)((function(e){var t=e.formattedAssets,i=e.gridItems,n=e.isCopyToCollection,r=e.mappedAssetType,s=e.redirectToCollectionDetailsPage,a=e.pageSection,c=e.listId;Q(r),L(t),ee(a),ne(c),n&&h(!0),i&&Y(i),s&&le({shouldHandleRedirect:!0,redirectToCollectionDetailsPage:s}),o(!0)}),[]);(0,c.useEffect)((function(){(0,u.DZ)({showAddToCollectionModal:ve,isLoggedInUser:oe})}),[oe,ve]);var me=(0,c.useMemo)((function(){return{assets:G,pageSection:$,assetType:F,collectionId:fe,collectionTitle:N,gridItems:X,isDialogActive:n,isSnackBarOpen:s,onAddToCollections:function(e){var t=e.id,i=e.title,n=e.verificationCode,r=e.groupedOptions,s=e.pageSection;return V(i),o(!1),a(!0),de({assetType:F,assets:G,gridItems:X,groupedOptions:r,id:t,title:i,verificationCode:n,pageSection:s||$,listId:ie})},onAlertSnackbarClose:function(){return a(!1)},redirectToCDPAction:ce,setIsDialogActive:o,showCopyToModalTitle:g,status:pe,verificationCode:ge}}),[G,X,de,ie,$,F,fe,N,n,s,ce,g,pe,ge]),Ce=(0,c.useCallback)((function(e){var t=e.assets,i=e.gridItems,n=e.isCopyToCollection,o=void 0!==n&&n,r=e.redirectToCollectionDetailsPage,s=e.pageSection,a=e.listId;if(oe){var c=function(e){return[].concat(e)}(t);ve({formattedAssets:c,gridItems:i,isCopyToCollection:o,mappedAssetType:(0,d.A8)(c[0]),redirectToCollectionDetailsPage:r,pageSection:s,listId:a})}else(0,u.JO)({assets:t,gridItems:i,signUpPath:re})}),[oe,ve,re]);return{addToCollectionViewsProps:me,addToCollectionViewsHandler:Ce,AddToCollectionViews:z}}},89908:function(e,t,i){i.d(t,{DZ:function(){return a},JO:function(){return s}});var n=i(45170),o="add_to_collection_asset",r="add_to_collection_grid_items",s=function(e){var t=e.assets,i=e.gridItems,n=e.signUpPath;window&&(t&&window.sessionStorage.setItem(o,JSON.stringify(t)),i&&window.sessionStorage.setItem(r,JSON.stringify(i)),window.location=n)},a=function(e){var t=e.showAddToCollectionModal,i=e.isLoggedInUser;if(void 0!==i){if(i){var s=window.sessionStorage.getItem(o),a=window.sessionStorage.getItem(r),c=function(e){return e&&"undefined"!==e};if(c(s)&&c(a)){var l=JSON.parse(s),u=JSON.parse(a),d=[].concat(l);t({formattedAssets:d,gridItems:u,mappedAssetType:(0,n.A8)(d[0]),isCopyToCollection:!1,redirectToCollectionDetailsPage:!1})}}window.sessionStorage.removeItem(o),window.sessionStorage.removeItem(r)}}},37812:function(e,t,i){i.d(t,{y:function(){return n}});var n=function(e){return[e.subPage,e.pageType].join("-")}},93271:function(e,t,i){i.d(t,{J:function(){return a}});var n=i(67294),o=i(257),r=i(73929),s=i(7112),a=function(){var e=(0,r.yh)().analytics,t=(0,s.Y)().getSearchContext;return(0,n.useCallback)((function(i){var n=i.collectionId,r=i.collectionName,s=i.gridItems,a=i.assets,c=i.pageSection,l=i.listId;e.productAddedToWishlist({products:a.map((function(e){return(0,o.bR)({asset:e,getSearchContext:t,gridItems:s,pageSection:c})})),wishlist_id:n,wishlist_name:r,list_id:null!==l&&void 0!==l?l:""})}),[e,t])}},18258:function(e,t,i){i.d(t,{Sl:function(){return q},Ov:function(){return x},cM:function(){return b}});var n,o,r=i(14924),s=i(26042),a=i(99534),c=i(10253),l=i(11163),u=i(56658),d=i(11987),p=i.n(d),f="signup",g="login",v=(n={},(0,r.Z)(n,f,"/".concat(f)),(0,r.Z)(n,g,"/".concat(g)),n),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,i=void 0===t?{}:t,n=p().format({pathname:v.signup,query:i});return[n,n]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,i=void 0===t?{}:t,n=p().format({pathname:v.login,query:i});return[n,n]},h=i(31955),T=i(11752),y="-undefined",S=(0,T.default)().publicRuntimeConfig.authSsoCookieName,I=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookies;return(e?e[S]:h.Z.get(S))===y},A=i(88540),w=i(72949),P=(o={},(0,r.Z)(o,u.k4,u.k4),(0,r.Z)(o,u.pX,u.gW),(0,r.Z)(o,u.gP,u.gP),(0,r.Z)(o,u.xF,u.xF),o),k=function(e){var t=e.getPathProps,i=e.query,n=(void 0===i?{}:i).landing_page,o=(0,a.Z)(e.query,["landing_page"]),r=(0,l.useRouter)().asPath,u=(0,A.D)(),d=u.isBrandSstk,p=u.isBrandEnterprise,f=function(e){var t=(0,w.qw)(e);return P[t]}(r),g=n||(p?"/"===r?null:r:null),v=(0,s.Z)({},d&&{site:f},g&&{landing_page:g},o);return(0,c.Z)(t({query:v}),1)[0]},b=function(e){return k({getPathProps:m,query:e})},x=function(){var e=(0,A.D)().isBrandEnterprise;return k({getPathProps:C,query:e?{site:"premier"}:{}})},q=function(e){var t=e.cookies,i=e.queryParams,n=e.signUpView,o=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookies,t=I({cookies:e});return{getPathProps:t?C:m,isSignUp:!t}}({cookies:t}),r=o.getPathProps,a=o.isSignUp;return k({getPathProps:r,query:(0,s.Z)({},i,a&&n?{view:n}:{})})}},82983:function(e,t,i){i.d(t,{w:function(){return d}});var n=i(47568),o=i(34051),r=i.n(o),s=i(67294),a=i(10123),c=i(49196),l=i(23367),u=i(41587),d=function(){var e=(0,s.useState)({status:"",error:void 0}),t=e[0],i=e[1],o=(0,s.useCallback)(function(){var e=(0,n.Z)(r().mark((function e(t){var n,o,s,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collection,o=t.mediaItem,s=(0,a.df)({urlParams:{id:n.id}}).formattedUrl,d={data:{id:n.id,relationships:{"cover-item":{data:{id:"".concat(o.id),type:l.A8}}},type:l.Ul}},e.prev=3,i({status:c.MR,error:void 0}),e.next=7,u.uS.patch(s,d);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),i({status:c.cM,error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),[]);return{status:t,setStatus:i,setAsCover:o}}}}]);
//# sourceMappingURL=53791-8c6173b03474bbc6.js.map